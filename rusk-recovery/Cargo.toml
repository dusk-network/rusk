[package]
name = "rusk-recovery"
version = "0.5.1"
edition = "2021"
autobins = false
description = "Tool to restore Rusk to factory settings"

[lib]
name = "rusk_recovery_tools"
path = "src/lib.rs"

[[bin]]
name = "rusk-recovery-keys"
path = "src/bin/keys.rs"
required-features = ["keys"]

[[bin]]
name = "rusk-recovery-state"
path = "src/bin/state.rs"
required-features = ["state"]

[build-dependencies]
rustc_tools_util = "0.2"

[dependencies]
hex = "0.4"
rustc_tools_util = "0.2"
rand = "0.8"
rusk-vm = "0.12.0-rc"
lazy_static = "1.4"
clap = { version = "3.1", features = ["cargo", "env", "derive"] }
thiserror = "1.0"
console = "0.12"
tracing = "0.1"
tracing-subscriber = { version = "0.2.0", features = ["fmt"] }
http_req = "0.8"
zip = "0.5"
rusk-profile = { path = "../rusk-profile" }

dusk-plonk = { version = "0.10", features = ["canon", "std"], optional = true }
microkelvin = { version = "0.15.0-rc", features = ["persistence"], optional = true }
dusk-bls12_381 = { version = "0.9", optional = true }
dusk-bls12_381-sign = { version = "0.3.0-rc", optional = true }
dusk-bytes =  { version = "0.1", optional = true }
transfer-circuits = { path = "../circuits/transfer", features=["builder"], optional = true }
transfer-contract = { path = "../contracts/transfer", default-features = false, optional = true }
stake-contract = { path = "../contracts/stake", default-features = false, optional = true }
rusk-abi = { path = "../rusk-abi", optional = true }
dusk-pki = { version = "0.10.0-rc", optional = true }
phoenix-core = { version = "0.16.0-rc", optional = true }

[features]
keys = [
    "dusk-plonk",
    "transfer-circuits",
    "dusk-bls12_381",
    "dusk-pki",
    "phoenix-core",
]
state = ["microkelvin", "dusk-bls12_381-sign", "dusk-bytes"]
genesis = [
    "state",
    "transfer-contract",
    "stake-contract",
    "transfer-circuits",
    "rusk-abi",
    "dusk-pki",
    "phoenix-core",
]
